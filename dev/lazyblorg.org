# -*- mode: org; coding: utf-8; flyspell-default-dictionary: "en_US"; -*-
# Time-stamp: <2014-02-01 21:02:23 vk>
* header information                                               :noexport:
:PROPERTIES:
:CREATED:  [2013-01-08 Tue 14:24]
:END:

#+TITLE:     lazyblorg development informations and issue tracker
#+AUTHOR:    Karl Voit
#+EMAIL:     tools@Karl-Voit.at
#+DATE:
#+DESCRIPTION:
#+KEYWORDS:
#+LANGUAGE:  en
#+OPTIONS:   H:3 num:t toc:t \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+LINK_UP:
#+LINK_HOME:
#+XSLT:

#+STARTUP: hidestars

#+STARTUP: overview   (or: showall, content, showeverything)
http://orgmode.org/org.html#Visibility-cycling

#+TODO: TODO(t) NEXT(n) STARTED(s) WAITING(w@/!) SOMEDAY(S!) | DONE(d!/!) CANCELLED(c@/!)
http://orgmode.org/org.html#Per_002dfile-keywords

#+TAGS: { wish(w) bug(b) userstory(u) inconsistency(i) question(q) architecture(a) tests(t) }
http://orgmode.org/org.html#Setting-tags


* Issue Tracking                                                     :issues:
:PROPERTIES:
:VISIBILITY: children
:CREATED:  [2013-01-08 Tue 14:26]
:END:

NOTE: Some issues that are marked as DONE or CANCELED are moved to the
corresponding archive-file "lazyblorg.org_archive".

** DONE spike: time-ordered-index data structure              :architecture:
CLOSED: [2013-08-20 Tue 15:02]
:LOGBOOK:
- State "DONE"       from "STARTED"    [2013-08-20 Tue 15:02]
:END:
:PROPERTIES:
:CREATED:  [2013-08-20 Tue 14:57]
:END:

- problem:
  - keep a sorted list of elements like [ [<time-stamp>,<id>], [...] ]

- http://wiki.python.org/moin/HowTo/Sorting/
  - sorting by index or named attribute!

Sorting by age using tuples:
#+BEGIN_SRC python
>>> student_tuples = [
        ('john', 'A', 15),
        ('jane', 'B', 12),
        ('dave', 'B', 10),
]
>>> sorted(student_tuples, key=lambda student: student[2])   # sort by age
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]
#+END_SRC

Sorting by attribute of a class:
#+BEGIN_SRC python
>>> class Student:
        def __init__(self, name, grade, age):
                self.name = name
                self.grade = grade
                self.age = age
        def __repr__(self):
                return repr((self.name, self.grade, self.age))

>>> student_objects = [
        Student('john', 'A', 15),
        Student('jane', 'B', 12),
        Student('dave', 'B', 10),
]
>>> sorted(student_objects, key=lambda student: student.age)   # sort by age
[('dave', 'B', 10), ('jane', 'B', 12), ('john', 'A', 15)]
#+END_SRC

** DONE Decision algorithm for generating entries; storage data :architecture:
CLOSED: [2013-08-20 Tue 14:44]
:LOGBOOK:
- State "DONE"       from "TODO"       [2013-08-20 Tue 14:44]
:END:
:PROPERTIES:
:CREATED:  [2012-11-06 Tue]
:ID: 2012-11-06-ago-generating
:END:

| *case* | *ID*      | *created*    | *last_update*   | *checksum*   | *result*                     | *description*                    |
|--------+-----------+--------------+-----------------+--------------+------------------------------+----------------------------------|
|      1 | not found | DC           | DC              | DC           | WARNING                      | blog-entry without ID            |
|      2 | not known | DC           | DC              | DC           | generate; RSS                | 1st time generation              |
|      3 | known     | not found    | DC              | DC           | WARNING                      | blog-entry without CREATED       |
|      4 | known     | not matching | DC              | DC           | ERROR                        | CREATED should not change        |
|      5 | known     | matching     | same as CREATED | matching     |                              | not changed since 1st generation |
|      6 | known     | matching     | unchanged       | matching     |                              | not changed since last update    |
|      7 | known     | matching     | unchanged       | not matching | generate; noRSS; noIncrement | silent update                    |
|      8 | known     | matching     | changed         | not matching | generate; RSS; Increment     | normal Update                    |

- for each ORGMODE-file
  - for each entry tagged with BLOGTAG AND in DONE state
    - if no :ID: found
      - case1
      - warning
      - continue with next heading
    - if ID not known
      - case2
      - generate RSS
      - generate HTML
      - continue with next heading
    - if CREATED not found
      - case3
      - warning
      - continue with next heading
    - if CREATED not matching previous run
      - case4
      - error-msg
      - continue with next heading
    - elseif CREATED and CHECKSUM matches
      - case5 or case6
      - debug: entry has not changed
    - elseif CREATED matches and CHECKSUM not matching
      - if LASTUPDATE changed
        - case8
        - increment update-number
        - generate RSS
        - generate HTML
      - else (if LASTUPDATE unchanged)
        - case7
        - generate HTML

- "RSS" means:
  - update time-ordered-index

- persistence storage has to hold (at least):
  - per blog entry:
    - ID
    - CREATED time-stamp
    - LAST_UPDATE time-stamp
    - checksum
  - time-ordered-index (OR: re-generate out of blog data)
    - LAST_UPDATE
    - ID

*** DONE [#A] finalize lazyblorg-algorithm sketch
CLOSED: [2012-11-10 Sat 18:10] DEADLINE: <2012-11-10 Sat>
:LOGBOOK:
- State "DONE"       from "NEXT"       [2012-11-10 Sat 18:10]
:END:
:PROPERTIES:
:CREATED:  [2012-11-07 Wed 21:23]
:END:
** DONE paper: sketch main page                                  :userstory:
CLOSED: [2014-02-01 Sat 15:02]
:LOGBOOK:
- State "DONE"       from "STARTED"    [2014-02-01 Sat 15:02]
:END:
:PROPERTIES:
:CREATED:  [2013-02-14 Thu 16:39]
:END:

- top: public voit banner (as usual)
- main content: 7 most recent blog entries
  - only up to first HR or heading
    - if HR/heading is found, add "read while article..." as link below
- side-bar
  1. "about" (persistent page)
     - about this blog
       - SW being used
       - how to follow
       - link to RSS
     - about Karl Voit
       - Twitter
       - github
  2. "tags" (persistent page)
     - explaining why I am using tags
     - auto-tags
     - overview on tags
  3. 2011, 2012, 2013, ...: yearly overview pages
     - of all years that contain blog articles
  4. "follow me": get updates via RSS (persistent page)
     - explaining the methods I provide

Defining the content in a special template heading:

- main page as "** Mainpage"
------------
- side-bar as "*** Sidebar"
  - list of elements
  - HR as separator (as shown above)
** DONE paper: sketch overview pages                             :userstory:
CLOSED: [2014-02-01 Sat 15:03]
:LOGBOOK:
- State "DONE"       from "STARTED"    [2014-02-01 Sat 15:03]
:END:
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 15:02]
:END:

- see paper from [2014-01-31 Fri] 

** NEXT HTML: manually create main jumping page                :architecture:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 12:24]
:END:

- HTML5-example: see KrÃ¶ner2011 p.123ff

** NEXT HTML: manually create month overview page             :architecture:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 14:12]
:END:

** NEXT HTML: manually create day overview page               :architecture:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 14:11]
:END:
** NEXT get ordered lists of blog entries                     :architecture:
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 13:48]
:END:

- [ ] time-ordered by issue day (for overview pages)
- [ ] time-ordered by last modification (for RSS and main page)
- [ ] method to get previous/next entry for each list entry

** NEXT create constants.py as module                         :architecture:
:PROPERTIES:
:CREATED:  [2013-10-01 Tue 21:05]
:END:

- handle configuration and run-time variables using this module
- ? parse config variables from Org-mode heading?

** NEXT CSS: if page is less than one page, place footer at bottom :userstory:
:PROPERTIES:
:CREATED:  [2014-01-31 Fri 23:56]
:END:
** NEXT implement method(s) to get URL of an blogdata id       :architecture:
:PROPERTIES:
:CREATED:  [2013-10-19 Sat 19:16]
:END:

- get absolute URL of any entry ID
- get relative (to a given URL) URL of any entry ID
- get relative URL to the central CSS for an entry ID

** NEXT implement: creating PERSISTENT pages                     :userstory:
:PROPERTIES:
:CREATED:  [2013-10-19 Sat 18:50]
:END:

- htmlizer

** NEXT implement: creating TAG pages                             :userstory:
:PROPERTIES:
:CREATED:  [2013-10-19 Sat 18:50]
:END:

- htmlizer
** NEXT embed images that are defined by tsfile-statements       :userstory:
:PROPERTIES:
:CREATED:  [2014-01-29 Wed 17:30]
:END:

- article mentions following:
: [[tsfile:2014-01-29 foo bar.png]]

- open questions

  - [X] how to tell width/height?
    - http://orgmode.org/worg/org-tutorials/images-and-xhtml-export.html
      : #+ATTR_HTML: alt="Zoomed image."
      : #+ATTR_HTML: width="300" style="border:2px solid black;"
      : #+ATTR_HTML: style="float:left;"
      : [[image]]
    - multiple attr-lines per image
      - RegEx: "#+ATTR_HTML: " followed by one or more "alt=[...]", "width=[...]", "height=[...]", "style=[...]"
      - alt -> write directly to alt attribute
      - width/height -> write directly to width/height attribute
      - style -> write directly to style attribute

  - [ ] create yasnippet file with attr line with drop-downs for
    common values
    - [ ] three standard-sizes?
      - small = xx em
      - medium = 50% textwidth
      - big = textwidth

  - [ ] scaling images -> probably future feature instead of here!
    - if scaled, add its size-identifier to original file name
      - "2014-01-29 file name.png" -> "2014-01-29 file name - scaled 42em.png"
      - makes it possible to use same file with different scaling
        sizes

- procedure
  1. [ ] additional parameter of files.org_archive
  2. parse files.org_archive on first usage of tsfile link
     - RegEx: [FILENAME] (with brackets!)
     - create global look-up dict: filename -> path
  3. get file location
     - add as list element in dict "payload"
     - this makes multiple paths per item possible!
  4. error if file not found
     - probably: re-try alternative path if file was found multiple times
  5. in case of article:
     - put file in article folder
     - link locally (relative path)
  6. in case of non-article (persistent, tag, ...):
     - put file in global folder named "tsfile" in root
     - link wirh absolute path
** NEXT catch all exceptions and create a log entry           :architecture:
:PROPERTIES:
:CREATED:  [2013-08-29 Thu 16:28]
:END:

** NEXT Glossary: variable names and so on                    :architecture:
:PROPERTIES:
:CREATED:  [2013-10-14 Mon 12:34]
:END:

** NEXT Refactor: unify all variables according to glossary    :architecture:
:PROPERTIES:
:CREATED:  [2013-10-14 Mon 12:35]
:END:
** NEXT parse/htmlize: lists                                     :userstory:
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 15:25]
:END:

** NEXT parse/htmlize: tables                                    :userstory:
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 15:25]
:END:

** NEXT parse/htmlize: internal links
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 15:25]
:END:

- to other blog articles, persistent pages, tag pages

** NEXT htmlizer: generate more Org-mode elements             :architecture:
:PROPERTIES:
:CREATED:  [2013-10-19 Sat 19:19]
:END:

- also: search for FIXXMEs in htmlizer
  - I did some quick & dirty copying (quote, src, ...) in order to
    enable real-world data parsing
** NEXT include image files                                      :userstory:
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:54]
:END:

- "lbimg:image.png"
  - works in Orgmode using custom link to valid folder
  - lazyblorg recognizes it and translates it to img

- show a fixed maximum width/height image
  - probably with a magnifying glass and a plus symbol in its lower
    right corner
- show the big version when clicking on it

- see KrÃ¶ner2011 p.140ff for HTML5 and figure/caption

- handle old HTTP-ATTR lines and new Org-mode HTTP attributes

*** TODO research different Org-mode ways of defining including images
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:55]
:END:

1. just link a file, do not show image
2. show the linked image directly

** STARTED test generate_output (comparing HTML/CSS output files)     :tests:
:PROPERTIES:
:CREATED:  [2013-02-14 Thu 17:28]
:END:

- Python: comparing files/directories: http://docs.python.org/2/library/filecmp.html

- example: https://github.com/bjonnh/PyOrgMode/blob/master/test.py
  - comparing Org-mode files line-by-line

*** Idea: parse content test cases from Org file

A file like Â«tests.orgÂ» contains test cases, each one in a
heading. if it starts with Â«test: Â» it is a test case followed by its
test name.

A sub-heading Â«OrgÂ» contains the Org-mode document/snippet which gets
parsed.

A sub-heading Â«resultÂ» contains the results which is expected.
** NEXT [#C] take a look at SASS -> CSS                       :architecture:
:LOGBOOK:
- Not scheduled, was "2013-09-16 Mon" on [2013-09-23 Mon 18:37]
:END:
:PROPERTIES:
:CREATED: [2013-09-13 Fri 14:06]
:END:
** NEXT [#C] research: Python Jinja as template system        :architecture:
:PROPERTIES:
:CREATED:  [2013-09-05 Thu 17:00]
:END:
** NEXT [#C] source code: replace pre with suitable environment  :userstory:
:PROPERTIES:
:CREATED:  [2014-01-30 Thu 16:11]
:END:

- htmlizer.py -> "## FIXXME: replace pre with suitable source code environment!"

** NEXT [#C] HTML: manually create year overview page         :architecture:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 14:12]
:END:

** TODO provide RSS feed(s)                                      :userstory:
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:57]
:END:

- sorted by last date within LOGBOOK or PROPERTIES drawers
- one general RSS feed
- one feed for each tag
- ? differ heading-only feeds and full feeds
  - OR: use only full feeds
** TODO documentation: describe tags for templates, persistent, tag, and normal :userstory:
:PROPERTIES:
:CREATED:  [2013-10-19 Sat 18:01]
:END:

- emphasize that templates, persistent, tag are mutual exclusive tags!

** TODO mark updates on entries                                :architecture:
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:50]
:END:

- heading gets a blog entry with a unique :ID:
- setting "Update 1/2/3/..." for each one of those:
: :LOGBOOK:
: - State "DONE"       from "NEXT"       [2011-10-07 Fri 15:40]
: :END:
- ALTERNATIVELY: set "Update YYYY-MM-DD for last one of those (from above)
- heading with known unique ID and no state DONE
  - should stay the same until state changes back to DONE
  - this requires something which remembers states
  - this requires keeping old entries

- body:
  - manual section:
    - Updates:
      1. YYYY-MM-DD: short description
      2. YYYY-MM-DD: short description

see also id:2012-11-06-ago-generating
** TODO write about/colophon                                      :userstory:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 11:31]
:END:

- example: http://www.tbray.org/ongoing/misc/Colophon

- containing
  - basic tools used
  - basic workflow
  - ...
** TODO add option to tweet title/url for new/updated articles   :userstory:
:PROPERTIES:
:CREATED:  [2013-10-20 Sun 18:37]
:END:

- e.g., publish new stuff on a "public-voit"-Twitter-account
  - probably there is a cloud service that translates RSS to Twitter?
  - probably more RSS-to-something-translators?

** TODO link to day in Wikipedia               :userstory:
:PROPERTIES:
:CREATED:  [2013-01-08 Tue 14:38]
:END:

- historic context
- YYYY-MM-DD -> links to Wikipedia-entries of days
  - https://en.wikipedia.org/wiki/Portal:Current_events/2010_August_26

** TODO auto-tag entries                                         :userstory:
:PROPERTIES:
:CREATED:  [2012-11-11 Sun 13:43]
:ID: 2012-11-11-autotags
:END:

- auto-tags are visually separated from manual tags to make it clear
  that they are automatically generated (and might be bogus sometime)

*** Language
:PROPERTIES:
:CREATED:  [2012-11-11 Sun 13:44]
:END:

- lang-de, de, en, us, ... ?
- language tag is automatically derived
  - by guessing language based on common stopwords or external library

*** Length
:PROPERTIES:
:CREATED:  [2012-11-11 Sun 13:44]
:END:

- oneliners
  - below a certain threshold
- middlesize(sic?)
  - between oneliners and fullsizeentries
- fullsize(sic?)

*** Auto-Disclaimer
:PROPERTIES:
:CREATED:  [2012-11-15 Thu 11:47]
:END:

- hooks for :TAGS: (can be optional) or case-sensitive keywords in headings
- if found:
  - link to a special pre-defined page

- Example: if "What The World Needs"|"WTWN:" is found, link to a page
  where WTWN-series is described in general.

** TODO [#B] CSS generated using Org/babel                    :architecture:
:PROPERTIES:
:CREATED:  [2012-12-13 Thu 10:08]
:END:

- css.org with Comments and css-blocks

#+BEGIN_SRC css
example-CSS content
#+END_SRC

- automatically extracting CSS code from that Org-mode file

- example: http://www.tbray.org/ongoing/When/201x/2011/04/21/Reflowing

backward compatibility for old browsers:
#+BEGIN_SRC css
section, article, header, footer, nav, aside, hgroup {
display: block;
}
#+END_SRC
** TODO [#B] format tables                                       :userstory:
:PROPERTIES:
:CREATED:  [2012-12-21 Fri 09:49]
:END:

- add JavaScript to be able to sort by column
- possible cnadidates for methods
  - http://tablesorter.com/docs/
  - HTML5 (?)
  - CSS: http://www.cssjuice.com/16-sortable-table-techniques/

- for lists
  - http://farhadi.ir/projects/html5sortable/

** TODO [#C] add frames to images                                :userstory:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 11:27]
:END:

- example: http://www.tbray.org/ongoing/When/200x/2006/04/08/Picture-Frames
  - caution: that's Java

** TODO [#C] tags, tag cloud, tag descriptions                   :userstory:
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:57]
:END:

- tag cloud for getting a quick overview on the blog itself
- a list of all tags on front page with link to tag-descriptions
- each tag gets a tag-description page
  - what I mean by this tag with examples
  - link to RSS feed for this tag
  - link to a list of blog entries for this tag

- see also id:2012-11-11-autotags
** SOMEDAY [#C] Pre-search for new blog articles before invoking lazyblorg :userstory:
:LOGBOOK:
- State "SOMEDAY"    from "TODO"       [2014-02-01 Sat 15:36]
:END:
:PROPERTIES:
:CREATED:  [2013-10-20 Sun 18:34]
:END:

- do a "egrep '^\*+ .*:blog:' | wc -l" and compare with last number
  - if changed, run lazyblorg
  - if not changed, do nothing
- does not work when same number of blog articles get deleted as
  created in between
- probably add this to best practice or FAQs

** SOMEDAY add/create/include/handle short URLs for each entry   :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-08-20 Tue 10:56]
:END:
:PROPERTIES:
:CREATED:  [2013-08-20 Tue 10:56]
:END:

- e.g.:
  - www.example.com/blog/i/aB3 ->
  - www.example.com/i/aB3 ->
- generate short URL as hash from ID?
  - is it possible without getting a high chance of conflicts?
    - YES:
      - use 4-letter-part of sha1-hash
      - before storing, check on conflict with existing one
        - use creation-date as first-come-first-serve
        - in case of conflict: add more sha1-letters to short-URL

- [2013-08-29 Thu]: idea: www.example.com/s(.html)#ID
  - one (long) HTML page with links to all pages
    - large space between entries such that entries can not be mixed
      up (showing multiple entries the same time)
    - disadvantage: user has to click on the URL of the article
  - working: /index.shtml#realcontent
    - www.example.com/s.html#ID
  - working: /#realcontent
    - www.example.com/s/#ID
    - *shorter!*

** SOMEDAY blog comments                                          :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-02-12 Tue 10:35]
:END:
:PROPERTIES:
:CREATED:  [2013-02-12 Tue 10:35]
:END:

- simplest form: generate unique Email link and add at bottom
  - very easy to be done for catch-all MTAs
  - automatically derive whitelist for MTA to avoid old spam
- simple HTML form
  - POST to script, adding comment to my inbox.org (containing
    link to ID)
- disqus: I do not want to outsource comment hosting :-(

** SOMEDAY handle :noexport: tag                                 :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-08-22 Thu 11:45]
:END:
:PROPERTIES:
:CREATED:  [2013-08-22 Thu 11:45]
:END:

- see http://orgmode.org/manual/Selective-export.html

** SOMEDAY guessing language of entry                            :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-01-08 Tue 14:36]
:END:
:PROPERTIES:
:CREATED:  [2012-11-11 Sun 10:53]
:END:

- https://github.com/dsc/guess-language

** SOMEDAY hidden entries by using tag "notlinked"               :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-01-08 Tue 14:46]
:END:
:PROPERTIES:
:CREATED:  [2012-12-14 Fri 22:51]
:END:

- if web server does not allow directory listing, this entry can only
  be found with knowledge of the URL
- check: is Google crawler able to find it when it's not linked?

** SOMEDAY fixed entries by using a tag                          :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-01-08 Tue 14:46]
:END:
:PROPERTIES:
:CREATED:  [2012-12-21 Fri 09:48]
:END:

- outside of YYYY/MM/DD-hierarchy
- e.g.
  - tools I use
  - books I read
  - ...
** SOMEDAY publish (only) free/busy times (in multiple formats)  :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-01-08 Tue 14:48]
:END:
:PROPERTIES:
:CREATED:  [2012-12-29 Sat 17:40]
:END:

** SOMEDAY CSS: round corners of images                          :userstory:
:LOGBOOK:
- State "SOMEDAY"    from "NEXT"       [2013-01-08 Tue 14:53]
:END:
:PROPERTIES:
:CREATED:  [2013-01-07 Mon 18:40]
:END:

- probably steal from http://www.tbray.org/ongoing/

** SOMEDAY [[http://tasker.dinglisch.net/][Tasker]]-script: share URL and send to my lazyblorg     :userstory:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-07-20 Sat 10:58]
:END:
:PROPERTIES:
:CREATED:  [2013-08-22 Thu 21:19]
:END:

- open questions
  - encryption
    - necessary? in the end, it gets public anyway :-)
  - prevent "content injection"
    - PKI: signing with private GnuPG-key of phone device?
      - DoS-attack still possible
        - sending a lot of fake messages
    - synchronous password?
    - ?
** SOMEDAY re-generate only necessary entries/pages            :architecture:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-08-22 Thu 21:19]
:END:
:PROPERTIES:
:CREATED:  [2013-08-22 Thu 21:19]
:END:

switch from "delete everything and re-generate everything on every
run" to "delete and re-generate only necessary entries/pages"

- [ ] adopt docstring of compare_blog_metadata()

** SOMEDAY [#C] in order not to parse *whole* content, split up parsing :architecture:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-08-21 Wed 11:58]
:END:
:PROPERTIES:
:CREATED:  [2013-08-21 Wed 11:58]
:END:

For optimizing performance and RAM usage: use *two parsing processes*:

  1. find new or updated articles
     - parse for used ID-links
     - collect and store metadata of these (everything except content)
     - print out warnings for all IDs that are broken links
     - create creative 404-page for all broken links in the meantime

  2. parse everything again and store only new or updated article contents
     - match with ID-links
** SOMEDAY [#C] do not parse HTML template file if unchanged  :architecture:
:LOGBOOK:
- State "SOMEDAY"    from ""           [2013-08-26 Mon 19:41]
:END:
:PROPERTIES:
:CREATED:  [2013-08-26 Mon 19:41]
:END:

- not much of a performance difference
- only a nice-to-have

* Notes                                                               :notes:

** Naming this project
:PROPERTIES:
:CREATED:  [2013-08-20 Tue 10:18]
:END:

lazyblorg - a mixture of lazy, blogging, blog, org-mode - emphasizes
the fact that the *user* of it may be very lazy. This relates to the
minimal effort she/he has to do in order to create a new blog entry.

There are no hits in [[https://www.google.com/#fp%3De12793cfcde69436&hl%3Den&nfpr%3D1&q%3Dlazyblorg&safe%3Doff][Google search for "lazyblorg"]]. However, there
are some for "lazyblog" (without the 'r').

- Other cool names would be:
  - invisiblorg
    - invisible, blog, org-mode
    - emphasizes the invisibility of the blog mechanism once it is
      set up
    - no hits for "[[https://www.google.com/#fp%3De12793cfcde69436&hl%3Den&nfpr%3D1&q%3Dinvisiblorg&safe%3Doff][invisiblorg]]" but some for "invisiblog" or "invisibl.org"
** Short descriptions of the Python modules/files
:PROPERTIES:
:CREATED:  [2013-08-22 Thu 21:24]
:END:

- lazyblorg.py
  - central module which uses all other modules
  - handles command line parameters
  - calls parser
  - gets template data
  - pushes data to htmlizer
- lib/utils.py
  - misc (static) tool-methods that are or might get handy for other
    modules as well
- lib/orgformat.py
  - borrowed from the [[https://github.com/novoid/Memacs][Memacs]] project
  - holds all kind of cool tool-methods to generate Org-mode stuff
    (time-stamps, ...)
- lib/orgparser.py
  - parses an Org-mode file and returns an internal representation of
    matching sections
- lib/htmlizer.py
  - responsible for everything between internal representation of blog
    stuff to create to their resulting files on the hard disk (HTML,
    CSS, ...)

** Implemented Org-mode Elements
:PROPERTIES:
:ID: implemented-org-elements
:END:

- list of Org Mode elements: http://article.gmane.org/gmane.emacs.orgmode/67871
  - will get on Worg some day!

Org elements: from ox-ascii.el (Org-mode)

#+NAME: implemented-org-elements
| *Org Element*       | [fn:earmarked] | [fn:lowprio] | implemented since | [fn:internalrepresentation]                                        | *HTML5*                                                  |
|---------------------+----------------+--------------+-------------------+--------------------------------------------------------------------+----------------------------------------------------------|
| bold                |                |              | <2014-01-30 Thu>  |                                                                    | b                                                        |
| center-block        |                | x            |                   |                                                                    |                                                          |
| clock               |                | x            |                   |                                                                    |                                                          |
| code                |                |              | <2014-01-30 Thu>  |                                                                    | code                                                     |
| drawer              |                | x            |                   |                                                                    |                                                          |
| dynamic-block       |                | x            |                   |                                                                    |                                                          |
| entity              |                |              |                   |                                                                    |                                                          |
| example-block       |                |              | <2014-01-30 Thu>  | ['example-block', 'name or None', [u'first line', u'second line']] | FIXXME                                                   |
| export-block        |                | x            |                   |                                                                    |                                                          |
| export-snippet      |                | x            |                   |                                                                    |                                                          |
| fixed-width         |                | x            |                   |                                                                    |                                                          |
| footnote-definition |                | x            |                   |                                                                    |                                                          |
| footnote-reference  |                | x            |                   |                                                                    |                                                          |
| headline            |                |              | <2014-01-30 Thu>  | ['heading', {'level': 3, 'title': u'my title'}]                    | section+header+h1                                        |
| horizontal-rule     |                |              | <2014-01-31 Fri>  | ['hr']                                                             | (ignored and only interpreted to mark end of standfirst) |
| inline-src-block    |                | x            |                   |                                                                    |                                                          |
| inlinetask          |                | x            |                   |                                                                    |                                                          |
| inner-template      |                | x            |                   |                                                                    |                                                          |
| italic              |                | x            |                   |                                                                    |                                                          |
| item                |                |              |                   |                                                                    |                                                          |
| keyword             |                | x            |                   |                                                                    |                                                          |
| latex-environment   |                |              | <2014-01-30 Thu>  | ['latex-block', 'name or None', [u'first line', u'second line']]   | FIXXME                                                   |
| latex-fragment      |                | x            |                   |                                                                    |                                                          |
| line-break          |                | x            |                   |                                                                    |                                                          |
| link                | x              |              |                   |                                                                    |                                                          |
| paragraph           |                |              | <2014-01-30 Thu>  | ['par', u'line1', u'line2']                                        | p                                                        |
| plain-list          | x              |              |                   | ['list-itemize', [u'first line', u'second line']]                  | ul+li                                                    |
| plain-text          |                |              | <2014-01-30 Thu>  | see: paragraph                                                     |                                                          |
| planning            |                | x            |                   |                                                                    |                                                          |
| quote-block         |                |              | <2014-01-30 Thu>  | ['quote-block', 'name or None', [u'first line', u'second line']]   | blockquote                                               |
| quote-section       |                | ?            |                   |                                                                    |                                                          |
| radio-target        |                | x            |                   |                                                                    |                                                          |
| section             |                |              | <2014-01-30 Thu>  | ['heading', {'title': u'Sub-heading foo', 'level': 3}]             | h2, h3, ...                                              |
| special-block       |                | x            |                   |                                                                    |                                                          |
| src-block           |                |              | <2014-01-30 Thu>  | ['src-block', 'name or None', [u'first line', u'second line']]     | pre                                                      |
| statistics-cookie   |                | x            |                   |                                                                    |                                                          |
| strike-through      |                | x            |                   |                                                                    |                                                          |
| subscript           |                | x            |                   |                                                                    |                                                          |
| superscript         |                | x            |                   |                                                                    |                                                          |
| table               | x              |              |                   |                                                                    |                                                          |
| table-cell          | x              |              |                   |                                                                    |                                                          |
| table-row           | x              |              |                   |                                                                    |                                                          |
| target              |                |              |                   |                                                                    |                                                          |
| template            |                | x            |                   |                                                                    |                                                          |
| timestamp           |                | x            |                   |                                                                    |                                                          |
| underline           |                | x            |                   |                                                                    |                                                          |
| verbatim            | x              |              |                   |                                                                    | pre                                                      |
| verse-block         |                |              | <2014-01-30 Thu>  | ['verse-block', 'name or None', [u'first line', u'second line']]   | pre                                                      |
| html-block          |                |              | <2014-01-30 Thu>  | ['html-block', 'name or None', [u'first line', u'second line']]    | pre (if no #+NAME: then insert directly!)                |

NOTE: OrgParser is using "par" for anything it can not interpret as
something else.

[fn:earmarked] Planned to be implemented soon (or at all :-)

[fn:lowprio] This feature is low on my personal development list (way
take some time or might never get implemented)

[fn:internalrepresentation] usually in list: ~blog_data['id-of-entry']['content']~

- Blocks: (beginning with ~BEGIN_~)
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fASCII-1620][ASCII]]
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fHTML-1661][HTML]]
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fLATEX-1719][LATEX]]
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fQUOTE-1493][QUOTE]]
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fSRC-1885][SRC]]
  - [[http://orgmode.org/org.html#index-g_t_0023_002bBEGIN_005fVERSE-1492][VERSE]]


#+NAME: template-placeholders-and-their-processing
| *placeholder*                      | *description*                                      | gets sanitized | *source*                                                  |
|------------------------------------+----------------------------------------------------+----------------+-----------------------------------------------------------|
| #ARTICLE-TITLE#                    | heading/title of the blog article                  | x              | Org: heading                                              |
| #ABOUT-BLOG#                       | a line of text which describes the blog in general |                | FIXXME                                                    |
| #BLOGNAME#                         | short name of the blog                             |                | FIXXME                                                    |
| #ARTICLE-YEAR#                     | four digit year of the article (folder path)       |                | Org: CREATED-time-stamp                                   |
| #ARTICLE-MONTH#                    | two digit month of the article (folder path)       |                | Org: CREATED-time-stamp                                   |
| #ARTICLE-DAY#                      | two digit day of the article (folder path)         |                | Org: CREATED-time-stamp                                   |
| #ARTICLE-PUBLISHED-HTML-DATETIME#  | time-stamp of publishing in HTML                   |                | Org: CREATED-time-stamp                                   |
| #ARTICLE-PUBLISHED-HUMAN-READABLE# | time-stamp of publishing in                        |                | Org: CREATED-time-stamp                                   |
| #TAGNAME#                          | string of a tag                                    |                | Org: tags of Org-heading                                  |
| #SECTION-TITLE#                    | title of the next heading/section                  | x              | Org: heading of Org sub-heading                           |
| #SECTION-LEVEL#                    | relative level of the next heading/section         |                | Org: level of heading - level of article + 1              |
| #PAR-CONTENT#                      |                                                    | x              | Org: content which is not recognized as something special |
| #A-URL#                            | URL of a hyperlink                                 |                | Org: Org-link                                             |
| #CONTENT#                          | description of the hyperlink                       |                | Org: Org-link                                             |
| #CONTENT#                          | text of the list item                              | x              | Org: item content of Org list                             |
| #NAME#                             | Org-mode name of a block                           |                | Org: #+NAME: declaration                                  |


#+NAME: template-elements-besides-org-elements
| *What*                | *template-name*      | *placeholder replacements*                                         |
|-----------------------+----------------------+--------------------------------------------------------------------|
| article               | article-header       | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|                       | article-footer       | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|                       | article-header-begin | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|                       | article-tags-begin   |                                                                    |
|                       | article-tag          | TAGNAME                                                            |
|                       | article-tags-end     | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|                       | article-header-end   | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|                       | article-end          | ARTICLE-TITLE, ABOUT-BLOG, BLOGNAME, ARTICLE-(YEAR,MONTH,DAY,PUB*) |
|-----------------------+----------------------+--------------------------------------------------------------------|
| headline              | section-begin        | SECTION-TITLE, SECTION-LEVEL                                       |
|-----------------------+----------------------+--------------------------------------------------------------------|
| paragraph, plain-text | paragraph            | PAR-CONTENT                                                        |
|-----------------------+----------------------+--------------------------------------------------------------------|
| URLs                  | a-href               | A-URL, CONTENT                                                     |
|-----------------------+----------------------+--------------------------------------------------------------------|
| plain-list            | ul-begin             |                                                                    |
|                       | ul-item              |                                                                    |
|                       | ul-end               |                                                                    |
|-----------------------+----------------------+--------------------------------------------------------------------|
| pre-fromatted text    | pre-begin            |                                                                    |
|                       | pre-end              |                                                                    |
|-----------------------+----------------------+--------------------------------------------------------------------|
| html-block            | html-begin           | NAME                                                               |
|                       | html-end             |                                                                    |




** Representation of blog data
CLOSED: [2013-08-20 Tue 18:15]
:LOGBOOK:
- State "DONE"       from "STARTED"    [2013-08-20 Tue 18:15]
:END:
:PROPERTIES:
:CREATED:  [2013-05-21 Tue 15:26]
:ID: blog_data
:END:

For a complete list of *content elements*, please take a look at
id:implemented-org-elements (above)

~blog_data~ is a Python list containing one dictionary entry per blog entry:

#+BEGIN_SRC python
  blog_data = \
  [ {'level': 2,                                                ## number of asterisks
     'title': u'This is a blog entry about foo', 
     'tags': [u'tag1', u'tag2'], 
     'id': u'lazyblorg-example-entry',                          ## ID from PROPERTIES-drawer
     'finished-timestamp-history': [datetime1, datetime2, datetime3],
     'timestamp': datetime,                                    ## most current time-stamp
     'created: datetime,
     'content': [ ['par', u'This is the Org-mode content'],    ## 'par: paragraph containing anything that is not defined like tables, ...
                  '\n',    ## change of paragraph
                  ['heading', {'level': 3, 'title': u'Another aspect'}],  
                  ['html-block', 'its name or None', [u'first line', u'second line', u'', u'last line']],
                  ['list-itemize', [u'first line', u'second line']],
                  ['table', u'followed by this table data'],         #FIXXME: table syntax
                  ['image', u'followed by this image']               #FIXXME: image syntax
                ]                                                    #FIXXME: further elements
  } ]
#+END_SRC

Thus:
#+BEGIN_SRC python
blog_data[0].keys()
## ... results in:
# ['title',
#  'timestamp',
#  'created',
#  'tags',
#  'content',
#  'finished-timestamp-history',
#  'level',
#  'id']

blog_data[0]['content']  ## -> list of elements of content
# [['text', u'This is the Org-mode content'],
#  ['heading', {'level': 3, 'title': u'Another aspect'}],
#  ['list-itemize', [u'first line', u'second line']],
#  ['table', u'FIXXME: followed by this table data'],
#  ['image', u'FIXXME: followed by this image']]
#+END_SRC
** Internal format of meta-data 
:PROPERTIES:
:CREATED:  [2013-08-22 Thu 21:08]
:END:

Example:
#+BEGIN_EXAMPLE
>>> metadata
{u'2013-08-22-testid': {'timestamp': datetime.datetime(2013, 8, 22, 21, 6), 'checksum': 'b757f8478bffd6c70a474f213d6520de', 'created': datetime.datetime(2013, 8, 22, 21, 6)}, 
 u'2013-02-12-lazyblorg-example-entry': {'timestamp': datetime.datetime(2013, 2, 14, 19, 2), 'checksum': '24af2246a5121e829a0dbbd6e2425c15', 'created': datetime.datetime(2013, 2, 12, 10, 58)}}
#+END_EXAMPLE

Keys of the dict: IDs of the entries:
#+BEGIN_EXAMPLE
>>> metadata.keys()
[u'2013-08-22-testid', u'2013-02-12-lazyblorg-example-entry']
#+END_EXAMPLE

One entry with key=ID holds a dict with following entries:
- 'timestamp': datetime.datetime(2013, 8, 22, 21, 6)
  - most recent time-stamp from the LOGBOOK drawer which marked going
    to a final state
- 'checksum': 'b757f8478bffd6c70a474f213d6520de'
  - md5 check-sum of: [title, tags, finished_timestamp_history, content]
- 'created': datetime.datetime(2013, 8, 22, 21, 6)
  - datetime object of the CREATED property from the PROPERTY drawer
  - [ ] FIXXME: why not the first CLOSED time-stamp?
** Time-stamps
:PROPERTIES:
:CREATED:  [2014-02-01 Sat 20:04]
:ID: 2014-02-01-time-stamps
:END:

Example:

: CLOSED: [2014-01-31 Fri 14:02]
: :LOGBOOK:
: - State "DONE"       from "DONE"       [2014-02-01 Sat 18:42]
: - State "DONE"       from ""           [2014-01-30 Thu 14:02]
: :END:
: :PROPERTIES:
: :CREATED:  [2014-01-28 Tue 14:02]
: :ID: 2014-01-27-lb-tests
: :END:

What happens with the various time-stamps?

- most recent LOGBOOK entry of setting to DONE:
  - added to entry['finished-timestamp-history'] (which is a list)
  - overwrites entry['timestamp'] if is newer than the old one
    - entry['timestamp'] is the most recent LOGBOOK entry of setting
      to DONE
- CREATED:
  - entry['created']
- CLOSED:
  - ignored
- ID-timestamp:
  - ignored

After parsing entry from above:

- entry['created'] = [2014-01-28 Tue 14:02]
- entry['timestamp'] = [2014-02-01 Sat 18:42]
- entry['finished-timestamp-history'] = [2014-02-01 Sat 18:42] and
  [2014-01-30 Thu 14:02]

Oldest entry of entry['finished-timestamp-history'] is the publication time-stamp!


** Development Schedule
:PROPERTIES:
:CREATED:  [2012-11-05 Mon 10:59]
:END:

this is the plan (from 2012-11):

- manually generate demo prototype
  - very basic Org-mode example file containing everything from below
  - HTML5 entry page
  - CSS2 style
  - HTML5 blog entry page
  - Tag description page
  - RSS feed
  - HTML5 blog entry page with update
  - Index overview page (archive)
  - description of basic work-flow for generating the blog
    - user point of view
    - system point of view
- refine and test design and features of prototype
  - ask for feedback
  - play around, break things
- development
  - define order of Org-mode items (headings, lists, images, ...) implementation priority
  - define even more basic (Org-mode, HTML) from above
  - very basic unit-tests from prototype files (Org-mode, HTML)
  - test and refine work-flow for (re-)generating the blog
  - implement more and more Org-mode items

** Wishlist without compromises
:PROPERTIES:
:ID: 2012blogwishlist-copy
:CREATED:  [2013-01-07 Mon 18:40]
:END:

NOTE: if entries are marked as done in this section, they are not
implemented but moved to a (separate) user-story above.

- Workflow to create a blog entry
  - make sure that there is an (uniq) :ID: property
  - add tag :blog: to heading
  - write content, subheadings, ...
  - change state of top-heading to DONE
  - (manually) invoke generation-script

- usage of only very basic markup
  - [X] paragraphs (p)
  - [X] headings (h1..n)
  - [X] http-references (a href)
  - [X] lists (ul)
  - [X] quote (verbatim)
  - [X] images (img)
  - [X] tables
  - [X] inline-HTML
  - [X] internal links to other entries

- advantages
  - a blog entry can be located anywhere in all of my Orgmode files
  - no extra formatting steps
  - very small overhead to create a blog entry
  - no duplicate information
    - update only in Orgmode, not HTML or any in-between format
  - static (fast) pages
  - self-hosting without any fancy services behind like RDBS

- open issues
  - [X] comments
    - simplest form: generate unique Email link and add at bottom
      - very easy to be done for catch-all MTAs
      - automatically derive whitelist for MTA to avoid old spam
    - simple HTML form
      - POST to script, adding comment to my inbox.org (containing
        link to ID)
    - disqus: I do not want to outsource comment hosting :-(
  - [X] how to include and format graphics?
    - sometimes, I e.g. want to have an image aligned right with text
      flowing around it
  - [-] probably: usage of in-between format like ikiwiki
    - Orgmode syntax -> ikiwiki markup (markdown?) -> usual
      ikiwiki-workflow
      - should be not much effort since prerequisites limit to few
        markup things
    - benefits from not having to re-implement many things
    - in-between-format HTML (like Manoj uses) is way too complicated
      causing misc potential error sources

- [ ] basic script workflow
  - find all headings with state DONE and tag :blog:
    - optionally: add all other tags starting with "blog-" as blog tags
  - one entry starts at such a heading until EOF OR same or less level
    heading is found
  - compare raw text and IDs with last run
    - known ID, raw text unchanged: ignore, no change
    - new ID
      - generate new blog entry
        - extract YYYY-MM-DD from LOGBOOK-drawer (first *->DONE transformation)
        - generate YYYY/MM/DD-folder structure in blog accordingly
        - generate sanitized blog title as file name
    - known ID, raw text differs
      - generate update of existing entry
        - add "(Update n)" (with n is the n-th update) to entry title
          - optionally: add this also to URL
            - disadvantage: broken old URLs
            - advantage: URL reflects update state
  - on any activity:
    - re-write RSS feed for last n entries
    - optionally: generate overview page for last n entries
    - optionally: generate calendar archive page(s)
    - optionally: generate tag overview page(s)
  - on any error:
    - create an orgmode event from current time that appears on agenda
    - with daily repeat -> so it gets noticed on the next day(s) too
    - in the description of that entry:
      - babel-sh-snippet with prepared command to re-try the run :-)

** Original post (How this all started)

Copied from: http://article.gmane.org/gmane.emacs.orgmode/49747/
#+BEGIN_QUOTE
Hi!

I got a nice idea on how a very easy to use Org-mode blog system
should look like.

Currently, I am using Serendipidy with web-based editor to write
HTML. Org-mode enabled me to write blog entries and export it to
HTML. Then I paste the HTML and have to modify minor things (images,
...) a bit. I guess the time from finishing the Org-mode entry to
the final blog entry is approximately ten to twenty minutes.

Overall, I do not want to do this process when I just want to
quickly write a view paragraphs within a couple of minutes. I need
a workflow with much less annoying overhead.

Therefore I sat down and thought about a workflow that should be
enough for writing simple weblog entries:

  - create an Org-mode heading (anywhere!)
  - make sure that there is an (uniq) :ID: property
  - add the tag :blog: to heading
  - <write content, subheadings, ...>
  - change state of top-heading to DONE
    - this enables blog entries Â«in the queueÂ»
  - (manually) invoke generation-script

This enables me quick blogging with a list of advantages:

  - a blog entry can be located anywhere in all of my Orgmode files
  - no extra formatting steps
  - very small (almost non-existent) overhead to create a blog entry
  - no duplicate information
    - updates only in Orgmode, not HTML or any in-between format
  - static (fast) pages
  - self-hosting without any fancy services behind like RDBS

What do you think of my ideas so far?

Of course, I looked into existing solutions and found those:

  - http://orgmode.org/worg/org-blog-wiki.html
    - cool overview page for various solutions
  - http://orgmode.org/worg/blorgit.html
    - pretty complex set up :-(
    - I do not need a web-interface to edit Org-mode files
    - seem to have Â«differentÂ» use cases
  - http://orgmode.org/worg/org-tutorials/org-jekyll.html
    - uses HTML as in-between format; seems to provide many error
      possibilities(?)
    - converting whole files only (not desired)
    - have to try it someday
  - http://emacs-fu.blogspot.com/2009/05/writing-and-blogging-with-org-mode.html
    - uses only HTML export
  - http://blog.herraiz.org/archives/241
    - uses only HTML export
  - https://github.com/chrismgray/ikiwiki-org-plugin
    - promising but only one part of a possible solution

So nothing offers the features and small footprint as my idea above
:-(

With some prerequisites, it should not be that hard to even
implement it by myself:

  - usage of only very basic markup
    - paragraphs (p)
    - headings (h1..n)
    - http-references (a href)
    - lists (ul)
    - images (img)
    - quote (verbatim)

Still there are some open issues:

  - comments
    - simplest form: generate unique Email link and add at bottom
      - very easy to be done for catch-all MTAs
      - automatically derive whitelist for MTA to avoid old spam
    - simple HTML form
      - POST to script, adding comment to my inbox.org (containing
        link to ID)
    - disqus: I do not want to outsource comment hosting :-(
  - how to include and format graphics?
    - sometimes, I e.g. want to have an image aligned right with text
      flowing around it
  - probably: usage of in-between format like ikiwiki
    - Orgmode syntax -> ikiwiki markup (markdown?) -> usual
      ikiwiki-workflow
      - should be not much effort since prerequisites limit to few
        markup things
    - benefits from not having to re-implement many things
    - in-between-format HTML (like Manoj uses) is way too complicated
      causing misc potential error sources

The basic script workflow is not that complicated:

  - find all headings with state DONE and tag :blog:
    - optionally: add all other tags starting with "blog-" as blog tags
  - one entry starts at such a heading until EOF OR same or less level
    heading is found
  - compare raw text and IDs with last run
    - known ID, raw text unchanged: ignore, no change
    - new ID
      - generate new blog entry
        - extract YYYY-MM-DD from LOGBOOK-drawer (first *->DONE transformation)
        - generate YYYY/MM/DD-folder structure in blog accordingly
        - generate sanitized blog title as file name
    - known ID, raw text differs
      - generate update of existing entry
        - add "(Update n)" (with n is the n-th update) to entry title
          - optionally: add this also to URL
            - disadvantage: broken old URLs
            - advantage: URL reflects update state
  - on any activity:
    - re-write RSS feed for last n entries
    - optionally: generate overview page for last n entries
    - optionally: generate calendar archive page(s)
    - optionally: generate tag overview page(s)

#+END_QUOTE

* Local Variables                                                  :noexport:
# Local Variables:
# mode: auto-fill
# mode: flyspell
# eval: (ispell-change-dictionary "en_US")
# End:
